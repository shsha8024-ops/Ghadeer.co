<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b1224;
  --card:#11182f;
  --accent:#4f7cff;
  --danger:#ff6b6b;
  --text:#ffffff;
  --muted:#b3b8d0;
}

*{box-sizing:border-box;font-family:"Segoe UI",Tahoma,Arial}

body{
  margin:0;
  background:linear-gradient(180deg,#0b1224,#050816);
  color:var(--text);
}

.hidden{display:none}

header{
  background:rgba(17,24,47,.9);
  backdrop-filter:blur(8px);
  padding:10px;
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:space-between;
  position:sticky;
  top:0;
}

nav button{
  background:transparent;
  border:1px solid #2a335f;
  color:#fff;
  padding:8px 14px;
  border-radius:10px;
  cursor:pointer;
}

nav button.active{
  background:var(--accent);
  border-color:var(--accent);
}

main{padding:16px;max-width:1000px;margin:auto}

.card{
  background:var(--card);
  border-radius:14px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.3);
}

.card h3{margin:0 0 12px}

input,select{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid #2a335f;
  background:#0b1224;
  color:#fff;
}

button.primary{
  background:var(--accent);
  border:0;
  padding:10px;
  border-radius:10px;
  color:#fff;
  cursor:pointer;
  width:100%;
}

button.danger{
  background:var(--danger);
  border:0;
  padding:8px 12px;
  border-radius:10px;
  color:#fff;
  cursor:pointer;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}

th,td{
  padding:10px;
  border-bottom:1px solid #2a335f;
  text-align:right;
}

th{color:var(--muted);font-weight:600}

/* LOGIN */
.login{
  position:fixed;
  inset:0;
  background:linear-gradient(180deg,#0b1224,#050816);
  display:flex;
  align-items:center;
  justify-content:center;
}

.login .card{width:320px;text-align:center}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginGate" class="login">
  <div class="card">
    <h3>ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
    <input id="lg_user" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <input id="lg_pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button class="primary" id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
    <div id="lg_error" class="hidden" style="color:var(--danger);margin-top:8px">
      Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©
    </div>
  </div>
</div>

<!-- HEADER -->
<header id="appHeader" class="hidden">
  <nav>
    <button data-tab="clients" class="active">Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
    <button data-tab="invoices">Ø§Ù„ÙÙˆØ§ØªÙŠØ±</button>
    <button data-tab="expenses">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
    <button data-tab="summary">Ø§Ù„Ù…Ù„Ø®Øµ</button>
  </nav>
  <button id="logoutBtn" class="danger">Ø®Ø±ÙˆØ¬</button>
</header>

<!-- APP -->
<main id="app" class="hidden">

<section id="clients">
  <div class="card">
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„</h3>
    <input id="c_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
    <button class="primary" id="addClientBtn">Ø¥Ø¶Ø§ÙØ©</button>
  </div>

  <div class="card">
    <h3>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
    <table>
      <thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th></tr></thead>
      <tbody id="clientRows"></tbody>
    </table>
  </div>
</section>

<section id="invoices" class="hidden">
  <div class="card">
    <h3>â• Ø¥Ø¶Ø§ÙØ© ÙØ§ØªÙˆØ±Ø©</h3>
    <select id="i_client"></select>
    <input id="i_desc" placeholder="ÙˆØµÙ Ø§Ù„ÙØ§ØªÙˆØ±Ø©">
    <input id="i_amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
    <button class="primary" id="addInvoiceBtn">Ø¥Ø¶Ø§ÙØ©</button>
  </div>

  <div class="card">
    <h3>ğŸ“„ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</h3>
    <table>
      <thead><tr><th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th></tr></thead>
      <tbody id="invoiceRows"></tbody>
    </table>
  </div>
</section>

<section id="expenses" class="hidden">
  <div class="card">
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</h3>
    <input id="e_desc" placeholder="ÙˆØµÙ Ø§Ù„Ù…ØµØ±ÙˆÙ">
    <input id="e_amount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
    <button class="primary" id="addExpenseBtn">Ø¥Ø¶Ø§ÙØ©</button>
  </div>

  <div class="card">
    <h3>ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>
    <table>
      <thead><tr><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th></tr></thead>
      <tbody id="expenseRows"></tbody>
    </table>
  </div>
</section>

<section id="summary" class="hidden">
  <div class="card">
    <h3>ğŸ“Š Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø§Ù„ÙŠ</h3>
    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: <b id="s_in">0</b></p>
    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª: <b id="s_ex">0</b></p>
    <p>Ø§Ù„ØµØ§ÙÙŠ: <b id="s_net">0</b></p>
  </div>
</section>

</main>

<script>
const USER="admin",PASS="admin";
let data=JSON.parse(localStorage.getItem("ga_ar"))||{clients:[],invoices:[],expenses:[]};
const $=id=>document.getElementById(id);

// Login
$("loginBtn").onclick=()=>{
  if($("lg_user").value===USER && $("lg_pass").value===PASS){
    $("loginGate").classList.add("hidden");
    $("app").classList.remove("hidden");
    $("appHeader").classList.remove("hidden");
    render();
  }else $("lg_error").classList.remove("hidden");
};

$("logoutBtn").onclick=()=>location.reload();

// Tabs
document.querySelectorAll("nav button").forEach(b=>{
  b.onclick=()=>{
    document.querySelectorAll("nav button").forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    document.querySelectorAll("main section").forEach(s=>s.classList.add("hidden"));
    $(b.dataset.tab).classList.remove("hidden");
  };
});

// Clients
$("addClientBtn").onclick=()=>{
  if(!$("c_name").value) return;
  data.clients.push({id:Date.now(),name:$("c_name").value});
  $("c_name").value="";
  save();render();
};

// Invoices
$("addInvoiceBtn").onclick=()=>{
  data.invoices.push({
    id:Date.now(),
    client:$("i_client").value,
    desc:$("i_desc").value,
    amount:+$("i_amount").value
  });
  $("i_desc").value=$("i_amount").value="";
  save();render();
};

// Expenses
$("addExpenseBtn").onclick=()=>{
  data.expenses.push({
    id:Date.now(),
    desc:$("e_desc").value,
    amount:+$("e_amount").value
  });
  $("e_desc").value=$("e_amount").value="";
  save();render();
};

function save(){localStorage.setItem("ga_ar",JSON.stringify(data));}

function render(){
  $("clientRows").innerHTML=data.clients.map(c=>`<tr><td>${c.name}</td></tr>`).join("");
  $("i_client").innerHTML=data.clients.map(c=>`<option value="${c.id}">${c.name}</option>`).join("");
  $("invoiceRows").innerHTML=data.invoices.map(i=>`<tr><td>${nameById(i.client)}</td><td>${i.desc}</td><td>${i.amount}</td></tr>`).join("");
  $("expenseRows").innerHTML=data.expenses.map(e=>`<tr><td>${e.desc}</td><td>${e.amount}</td></tr>`).join("");

  const tin=data.invoices.reduce((s,x)=>s+x.amount,0);
  const tex=data.expenses.reduce((s,x)=>s+x.amount,0);
  $("s_in").textContent=tin;
  $("s_ex").textContent=tex;
  $("s_net").textContent=tin-tex;
}

function nameById(id){
  const c=data.clients.find(x=>x.id==id);
  return c?c.name:"";
}
</script>

</body>
</html>